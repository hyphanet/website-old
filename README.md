# Freenet Website

Scripts and translations from which the [Freenet website](https://freenetproject.org) is generated.

## Requirements

 - Bash
 - PHP5-CGI `aptitude install php5-cgi`

## Usage

Run `make-pages.sh`. Output is placed in the `output` directory.

## Internals

Pages are generated by PHP scripts in `pages/` for each language. The contents of the top-level `index.php` is used across all pages for consistent formatting.

Redirects:

* From `https://freenetproject.org/jnlp` go to GitHub releases.
* From `https://downloads.freenetproject.org/latest/` go to somewhere else on `downloads.freenetproject.org`.

## Setup for Deploying

If you have not done so already, on Osprey set up clones of `website` and `fred`. They are used by the deploy script to generate the new version of the website and determine the latest version of Freenet, respectively.

    git clone git://github.com/freenet/website.git
    git clone git://github.com/freenet/fred.git

Then clone the `scripts` repo, which contains the `deploy-website` script.

    git clone git://github.com/freenet/scripts.git

`deploy-website` will assume the `website`, `fred`, and `scripts` directories/repos are all in the same directory. Run `deploy-website --help` for more information.

## Deploying

From a machine other than Osprey push to the master branch of the website repository:

    git push git@github.com:freenet/website.git master

On Osprey pull and deploy the updated version of the website:

    scripts/deploy-website -u

The script will confirm version information and languages before deploying.
